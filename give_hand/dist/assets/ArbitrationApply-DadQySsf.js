import{_ as w,u as C,r as c,l as k,m as V,c as a,b as e,d as v,t as i,w as y,v as h,s as N,F as B,f as E,q as S,i as T,e as $,o as u}from"./index-CeEdpuPy.js";import{a as q}from"./orders-L_Q0EYNJ.js";import{a as F}from"./arbitration-DFAKUp06.js";import"./http-CWkExEYz.js";const K={class:"arbitration-page"},M={class:"top"},O={class:"main"},R={class:"section"},U={class:"order-info"},L={class:"section"},j={class:"section"},z={class:"evidence-section"},G={key:0,class:"evidence-list"},H={class:"evidence-text"},J=["onClick"],P={class:"add-evidence"},Q={class:"footer"},W=["disabled"],X={__name:"ArbitrationApply",setup(Y){const I=T(),d=$();C();const l=c(null),r=c(""),n=c({orderId:null,reason:"",evidence:[]}),g=k(()=>{var t;return{0:"待接单",1:"进行中",2:"已完成",3:"已取消"}[(t=l.value)==null?void 0:t.status]||"未知"}),p=k(()=>n.value.reason.trim().length>0&&n.value.orderId);async function A(){const s=I.query.orderId;if(!s){alert("订单ID缺失"),d.back();return}try{l.value=await q(s),n.value.orderId=Number(s)}catch(t){console.error("获取订单详情失败:",t),alert("订单信息加载失败"),d.back()}}function m(){const s=r.value.trim();s&&!n.value.evidence.includes(s)&&(n.value.evidence.push(s),r.value="")}function x(s){n.value.evidence.splice(s,1)}async function D(){if(!p.value){alert("请填写仲裁理由");return}if(confirm("确认提交仲裁申请吗？提交后无法撤销。"))try{await F({orderId:n.value.orderId,reason:n.value.reason,evidence:n.value.evidence}),alert("仲裁申请提交成功，客服将尽快处理"),d.back()}catch(s){console.error("提交仲裁失败:",s),alert("提交失败，请稍后重试")}}return V(A),(s,t)=>{var f,b;return u(),a("div",K,[e("header",M,[e("button",{class:"back",onClick:t[0]||(t[0]=o=>s.$router.back())},"←"),t[3]||(t[3]=e("h2",{class:"title"},"申请仲裁",-1))]),e("main",O,[e("div",R,[t[7]||(t[7]=e("h3",null,"订单信息",-1)),e("div",U,[e("p",null,[t[4]||(t[4]=e("strong",null,"订单标题：",-1)),v(i(((f=l.value)==null?void 0:f.title)||"加载中..."),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"订单金额：",-1)),v("¥"+i(((b=l.value)==null?void 0:b.price)||0),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"订单状态：",-1)),v(i(g.value),1)])])]),e("div",L,[t[8]||(t[8]=e("h3",null,"仲裁理由",-1)),y(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.value.reason=o),class:"reason-input",placeholder:"请详细描述争议原因（如：对方未完成任务、服务态度差等）",rows:"6"},null,512),[[h,n.value.reason]])]),e("div",j,[t[9]||(t[9]=e("h3",null,"证据材料（可选）",-1)),e("div",z,[n.value.evidence.length>0?(u(),a("div",G,[(u(!0),a(B,null,E(n.value.evidence,(o,_)=>(u(),a("div",{class:"evidence-item",key:_},[e("span",H,i(o),1),e("button",{class:"remove-btn",onClick:Z=>x(_)},"×",8,J)]))),128))])):N("",!0),e("div",P,[y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.value=o),class:"evidence-input",placeholder:"输入证据链接或描述（如聊天记录截图、订单截图等）",onKeyup:S(m,["enter"])},null,544),[[h,r.value]]),e("button",{class:"add-btn",onClick:m},"添加")])])]),t[10]||(t[10]=e("div",{class:"section"},[e("h3",null,"注意事项"),e("ul",{class:"tips"},[e("li",null,"请提供真实有效的争议信息"),e("li",null,"虚假仲裁将影响您的信用记录"),e("li",null,"平台将在1-3个工作日内处理")])],-1))]),e("footer",Q,[e("button",{class:"primary",onClick:D,disabled:!p.value}," 提交仲裁申请 ",8,W)])])}}},oe=w(X,[["__scopeId","data-v-5f97ed1a"]]);export{oe as default};
