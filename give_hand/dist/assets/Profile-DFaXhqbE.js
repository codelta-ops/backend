import{_ as h,u as x,a as k,m as y,c as e,b as s,s as b,t as r,e as A,o as i}from"./index-CeEdpuPy.js";import{a as C}from"./auth-EPtFGtg6.js";import{g as I}from"./user-XVPjIFuX.js";import"./http-CWkExEYz.js";const U={class:"page"},E={class:"main"},P={class:"card user-card"},w={class:"avatar"},B=["src"],S={key:1,class:"circle"},D={class:"info"},N={class:"name"},V={class:"uid"},j={__name:"Profile",setup(L){const n=A(),u=x(),o=k({uid:"",avatar:"",username:"",school:"",studentId:"",name:"",email:""});async function d(){try{const a=await I();Object.assign(o,a),console.log("✅ [7] 获取用户信息成功:",a)}catch(a){console.error("获取用户信息失败:",a)}}function p(){o.avatar=""}function m(){n.push("/profile/edit")}function f(){n.push("/arbitration")}function _(){n.push("/about")}function v(){n.push("/settings")}async function g(){try{await C()}catch{console.warn("登出 API 调用失败，但仍清除本地状态")}u.logout(),n.replace("/login")}return y(d),(a,t)=>{var l,c;return i(),e("div",U,[t[4]||(t[4]=s("header",{class:"top"},[s("h2",null,"个人中心")],-1)),s("main",E,[s("div",P,[s("div",w,[o.avatar?(i(),e("img",{key:0,src:o.avatar,alt:"头像",class:"avatar-img",onError:p},null,40,B)):(i(),e("div",S,r(((c=(l=o==null?void 0:o.username)==null?void 0:l[0])==null?void 0:c.toUpperCase())||"U"),1))]),s("div",D,[s("div",N,r((o==null?void 0:o.username)||"未登录"),1),s("div",V,"UID: "+r((o==null?void 0:o.uid)||"xxxxxxxx"),1)])]),s("div",{class:"card menu",onClick:f},[...t[0]||(t[0]=[s("span",null,"申请仲裁",-1),s("span",null,"›",-1)])]),s("div",{class:"card menu",onClick:m},[...t[1]||(t[1]=[s("span",null,"个人资料",-1),s("span",null,"›",-1)])]),s("div",{class:"card menu",onClick:v},[...t[2]||(t[2]=[s("span",null,"设置",-1),s("span",null,"›",-1)])]),s("div",{class:"card menu",onClick:_},[...t[3]||(t[3]=[s("span",null,"关于我们",-1),s("span",null,"›",-1)])]),o.uid?(i(),e("button",{key:0,class:"logout",onClick:g}," 退出登录 ")):b("",!0)])])}}},z=h(j,[["__scopeId","data-v-3e2183cc"]]);export{z as default};
