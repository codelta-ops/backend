import{_ as m,u as f,r as v,a as b,m as g,c as y,b as e,w as s,v as a,t as U,e as x,o as I}from"./index-CeEdpuPy.js";import{g as V,u as c}from"./user-XVPjIFuX.js";import"./http-CWkExEYz.js";const k={class:"page"},w={class:"top"},_={class:"main"},A={class:"form-group"},B={class:"form-group"},E={class:"form-group"},P={class:"form-group"},C={class:"form-group"},D={class:"form-group"},M=["disabled"],R={__name:"ProfileEdit",setup(S){const u=x(),d=f(),r=v(!1),l=b({avatar:"",username:"",school:"",studentId:"",name:"",email:""});async function i(){const n=await V();Object.assign(l,n)}async function p(){r.value=!0;try{await c(l),d.updateUser(l),alert("个人资料已更新"),u.push("/profile")}catch(n){alert(n.message||"更新失败")}finally{r.value=!1}}return g(i),(n,t)=>(I(),y("div",k,[e("header",w,[e("button",{class:"back",onClick:t[0]||(t[0]=o=>n.$router.back())},"←"),t[7]||(t[7]=e("div",{class:"title"},"编辑个人资料",-1))]),e("main",_,[e("div",A,[t[8]||(t[8]=e("label",null,"头像",-1)),s(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.avatar=o),type:"text",placeholder:"请输入头像 URL"},null,512),[[a,l.avatar]])]),e("div",B,[t[9]||(t[9]=e("label",null,"用户名",-1)),s(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.username=o),type:"text",placeholder:"请输入用户名"},null,512),[[a,l.username]])]),e("div",E,[t[10]||(t[10]=e("label",null,"学校",-1)),s(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.school=o),type:"text",placeholder:"请输入学校名称"},null,512),[[a,l.school]])]),e("div",P,[t[11]||(t[11]=e("label",null,"学号",-1)),s(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.studentId=o),type:"text",placeholder:"请输入学号"},null,512),[[a,l.studentId]])]),e("div",C,[t[12]||(t[12]=e("label",null,"姓名",-1)),s(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.name=o),type:"text",placeholder:"请输入真实姓名"},null,512),[[a,l.name]])]),e("div",D,[t[13]||(t[13]=e("label",null,"邮箱",-1)),s(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.email=o),type:"email",placeholder:"请输入邮箱"},null,512),[[a,l.email]])]),e("button",{class:"primary-btn",onClick:p,disabled:r.value},U(r.value?"保存中...":"保存"),9,M)])]))}},N=m(R,[["__scopeId","data-v-7d32a617"]]);export{N as default};
